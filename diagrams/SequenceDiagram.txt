sequenceDiagram

    actor userEntity
    participant UserController
    participant UserFacade
    participant UserService
    participant UserRepository

    userEntity ->> UserController: addUser
    UserController ->> UserController: ValidateRequestBody
    UserController ->> UserFacade: addUser
    UserFacade ->> +UserService: addUser
    UserService ->> +UserRepository: existsByUsername
    UserRepository -->> -UserService: Check result for username being taken or not

    break when the result is true
        UserService -->> UserController: throwUserAlreadyExistsException
        UserController -->> userEntity: Show failure cause
    end

    UserService ->> +UserRepository: saveUserData
    UserRepository -->> -UserService: Returns saved userEntity
    UserService -->> -UserFacade:
    UserFacade ->> +UserService: createUserURI
    UserService -->> -UserFacade: Returns URI of the saved userEntity
    UserFacade -->> UserController:
    UserController -->> userEntity: Show success message
